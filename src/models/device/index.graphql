#import '../public.graphql'

query DeviceList(
  $limit: Int = 10
  $offset: Int = 0
  $order_by: [device_order_by!] = {}
  $where: device_bool_exp = {}
) {
  list: device(
    limit: $limit
    offset: $offset
    order_by: $order_by
    where: $where
  ) {
    ...DeviceDetail
    creator {
      ...UserInfo
    }
  }
  total: device_aggregate {
    aggregate {
      count
    }
  }
}

query DeviceById($id: uuid = "") {
  detail: device_by_pk(id: $id) {
    ...DeviceDetail
    creator {
      ...UserInfo
    }
  }
}

mutation CreateDevice($data: device_insert_input = {}) {
  data: insert_device_one(
    object: $data
    on_conflict: { constraint: device_id_key }
  ) {
    ...DeviceDetail
  }
}

mutation UpdateDeviceById($id: uuid = "", $data: device_set_input = {}) {
  data: update_device_by_pk(pk_columns: { id: $id }, _set: $data) {
    ...DeviceDetail
  }
}

mutation DeleteDeviceById($id: uuid = "") {
  data: delete_device_by_pk(id: $id) {
    ...DeviceDetail
  }
}

mutation DeleteDeviceBulk($ids: [uuid!]!) {
  root: delete_device(where: { id: { _in: $ids } }) {
    affected_rows
    returning {
      id
    }
  }
}
